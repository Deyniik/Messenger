<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deynik Messenger</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: #121212;
            color: #FFFFFF;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        /* Стили остаются такими же как в предыдущем коде */
        /* ... остальные стили ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- Интерфейс мессенджера -->
    </div>

    <script>
        // ИСПОЛЬЗУЙТЕ КОНФИГУРАЦИЮ ИЗ РАДИО
        const firebaseConfig = {
            apiKey: "AIzaSyBk4nxZ1ldNQUCxsbgaeYTkm9stq0o9o2Q",
            authDomain: "deygram-e4814.firebaseapp.com",
            projectId: "deygram-e4814",
            storageBucket: "deygram-e4814.firebasestorage.app",
            messagingSenderId: "591207353726",
            appId: "1:591207353726:web:d20f5e648d3daf86fcb72f"
        };

        // Инициализация Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Проверка аутентификации
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Пользователь вошел в систему
                console.log('Пользователь:', user.displayName);
                initMessenger();
            } else {
                // Показываем экран входа
                showLoginScreen();
            }
        });

        function showLoginScreen() {
            document.body.innerHTML = `
                <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #121212;">
                    <div style="background: #191414; padding: 40px; border-radius: 12px; text-align: center; border: 1px solid #1DB954;">
                        <div style="font-size: 3rem; color: #1DB954; margin-bottom: 20px;">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h1 style="color: #1DB954; margin-bottom: 10px;">Deynik Messenger</h1>
                        <p style="color: #B3B3B3; margin-bottom: 30px;">Войдите, чтобы начать общение</p>
                        <button id="loginBtn" style="background: #1DB954; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 1rem; cursor: pointer;">
                            <i class="fab fa-google"></i> Войти через Google
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('loginBtn').addEventListener('click', () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider);
            });
        }

        function initMessenger() {
            // Здесь код интерфейса мессенджера
            document.body.innerHTML = `
                <div class="container">
                    <div class="sidebar">
                        <div class="user-info">
                            <div class="user-avatar">${auth.currentUser.displayName.charAt(0)}</div>
                            <div class="user-name">${auth.currentUser.displayName}</div>
                            <button onclick="auth.signOut()">Выйти</button>
                        </div>
                        <div class="users-list">
                            <h3>Пользователи</h3>
                            <div id="usersContainer"></div>
                        </div>
                    </div>
                    <div class="chat-area">
                        <div class="chat-header">
                            <h3>Выберите пользователя для общения</h3>
                        </div>
                        <div class="messages" id="messagesContainer"></div>
                        <div class="message-input">
                            <input type="text" id="messageInput" placeholder="Введите сообщение...">
                            <button onclick="sendMessage()">Отправить</button>
                        </div>
                    </div>
                </div>
            `;

            loadUsers();
        }

        function loadUsers() {
            // Загрузка пользователей из базы
            // Используем ту же коллекцию, что и в радио
        }

        function sendMessage() {
            // Отправка сообщения
        }
    </script>
</body>
</html>
